{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Yassa\\\\Desktop\\\\Flick latest\\\\FlickPlix\\\\frontend\\\\src\\\\components\\\\customerUserProfile\\\\customerUserProfile.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { getUser, removeUser } from '../../utils/common';\nimport '../../css/it19184722.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function CustomerUserProfile(props) {\n  _s();\n\n  const [fname, setfirstName] = useState(\"\");\n  const [lname, setlastName] = useState(\"\");\n  const [email, setemail] = useState(\"\");\n  const [address, setaddress] = useState(\"\");\n  const [pNo, setphone] = useState(\"\");\n  const id = getUser();\n  const [errors, seterrors] = useState([]);\n  const [emailerror, setemailerror] = useState(\"\");\n  const [loginMsg] = useState(localStorage.getItem(\"loginMsg\")); //this sets logout msg if any\n\n  const [success, setsuccess] = useState(\"\");\n\n  window.onload = function () {\n    localStorage.removeItem(\"loginMsg\");\n  }; //this resets the state on refreshing\n\n\n  useEffect(() => {\n    async function fetchData() {\n      const customer = (await axios.get(`http://localhost:8070/customer/profile/${id}`, {\n        withCredentials: true\n      })).data;\n      setfirstName(customer.fname);\n      setlastName(customer.lname);\n      setemail(customer.email);\n      setaddress(customer.address);\n      setphone(\"0\" + customer.pNo);\n    }\n\n    fetchData();\n  }, [id]);\n\n  const personalInfoForm = () => {\n    const inputFields = document.querySelectorAll(\"input[type='text']\");\n\n    for (let field = 0; field < inputFields.length; field++) {\n      inputFields[field].removeAttribute('disabled');\n    }\n\n    document.getElementById('updateButton').removeAttribute('hidden');\n    document.getElementById('cancelButton').removeAttribute('hidden');\n    document.getElementById('resetButton').setAttribute('hidden', 'true');\n    document.getElementById('editButton').setAttribute('hidden', 'true');\n  };\n\n  const editData = async e => {\n    e.preventDefault();\n    setemailerror('');\n    seterrors([]);\n    const response = await axios.post(`http://localhost:8070/customer/profile/update/${id}`, {\n      fname,\n      lname,\n      address,\n      pNo\n    }, {\n      withCredentials: true\n    });\n\n    if (response.data.success) {\n      const inputFields = document.querySelectorAll(\"input[type='text']\");\n\n      for (let field = 0; field < inputFields.length; field++) {\n        inputFields[field].setAttribute('disabled', 'true');\n      }\n\n      document.getElementById('updateButton').setAttribute('hidden', 'true');\n      document.getElementById('cancelButton').setAttribute('hidden', 'true');\n      document.getElementById('resetButton').removeAttribute('hidden');\n      document.getElementById('editButton').removeAttribute('hidden');\n      setsuccess('You have successfully updated your profile!');\n      props.history.push(\"/customer/profile\");\n    }\n\n    if (response.data.errors) {\n      seterrors(response.data.errors);\n    }\n\n    if (response.data.emailerror) {\n      setemailerror(response.data.emailerror);\n    }\n  };\n\n  const cancelUpdate = () => {\n    window.location = '/customer/profile';\n  };\n\n  const resetButton = () => {\n    props.history.push(\"/customer/profile/password-reset\");\n  };\n\n  const logoutHandler = () => {\n    if (window.confirm(\"Do you want to logout?\")) {\n      removeUser();\n      localStorage.setItem('logoutMsg', 'You have successfully logged out!');\n      window.location = '/customer/login';\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    className: \"form-group it19184722-myForm\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"User Profile\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn-danger btn it19184722-red-btn\",\n      id: \"it19184722-logout-btn\",\n      onClick: logoutHandler,\n      children: \"Log out\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }, this), errors ? errors.map(error => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"alert alert-danger\",\n        role: \"alert\",\n        children: error.msg\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 25\n      }, this);\n    }) : null, emailerror ? /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"alert alert-danger\",\n      role: \"alert\",\n      children: emailerror\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }, this) : null, loginMsg ? /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"alert alert-success\",\n      role: \"alert\",\n      children: loginMsg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }, this) : null, success ? /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"alert alert-success\",\n      role: \"alert\",\n      children: success\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 17\n    }, this) : null, /*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"First Name\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      className: \"form-control\",\n      type: \"text\",\n      onChange: e => setfirstName(e.target.value),\n      value: fname,\n      disabled: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 132\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"Last Name\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      className: \"form-control\",\n      type: \"text\",\n      onChange: e => setlastName(e.target.value),\n      value: lname,\n      disabled: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 131\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"Email\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      className: \"form-control\",\n      type: \"email\",\n      value: email,\n      disabled: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 86\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"Address\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      className: \"form-control\",\n      type: \"text\",\n      onChange: e => setaddress(e.target.value),\n      value: address,\n      disabled: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 132\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"Phone No\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      className: \"form-control\",\n      type: \"text\",\n      onChange: e => setphone(e.target.value),\n      value: pNo,\n      disabled: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 126\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"it19184722-btn-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"editButton\",\n        type: \"button\",\n        value: \"Edit Details\",\n        onClick: personalInfoForm,\n        className: \"it19184722-green-btn btn\",\n        style: {\n          marginRight: '5px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"resetButton\",\n        type: \"button\",\n        value: \"Reset Password\",\n        onClick: resetButton,\n        className: \"it19184722-trans-green-btn btn\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"updateButton\",\n        type: \"button\",\n        value: \"Update\",\n        onClick: editData,\n        className: \"it19184722-green-btn btn\",\n        style: {\n          marginRight: '5px'\n        },\n        hidden: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"cancelButton\",\n        type: \"button\",\n        value: \"Cancel\",\n        onClick: cancelUpdate,\n        className: \"btn-danger btn it19184722-red-btn\",\n        hidden: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 13\n  }, this);\n}\n\n_s(CustomerUserProfile, \"SKitGvrfbOpeUevLpv2zL+3IoGA=\");\n\n_c = CustomerUserProfile;\n\nvar _c;\n\n$RefreshReg$(_c, \"CustomerUserProfile\");","map":{"version":3,"sources":["C:/Users/Yassa/Desktop/Flick latest/FlickPlix/frontend/src/components/customerUserProfile/customerUserProfile.js"],"names":["React","useState","useEffect","axios","getUser","removeUser","CustomerUserProfile","props","fname","setfirstName","lname","setlastName","email","setemail","address","setaddress","pNo","setphone","id","errors","seterrors","emailerror","setemailerror","loginMsg","localStorage","getItem","success","setsuccess","window","onload","removeItem","fetchData","customer","get","withCredentials","data","personalInfoForm","inputFields","document","querySelectorAll","field","length","removeAttribute","getElementById","setAttribute","editData","e","preventDefault","response","post","history","push","cancelUpdate","location","resetButton","logoutHandler","confirm","setItem","map","error","msg","target","value","marginRight"],"mappings":"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","sourcesContent":["import React, {useState,useEffect}  from 'react';\r\nimport axios from 'axios';\r\nimport {getUser, removeUser} from '../../utils/common';\r\nimport '../../css/it19184722.css';\r\n\r\n\r\nexport default function CustomerUserProfile(props) {\r\n    const [fname, setfirstName] = useState(\"\");\r\n    const [lname, setlastName] = useState(\"\");\r\n    const [email, setemail] = useState(\"\");\r\n    const [address, setaddress] = useState(\"\");\r\n    const [pNo, setphone] = useState(\"\");\r\n    const id = getUser();\r\n    const [errors, seterrors] = useState([]);\r\n    const [emailerror, setemailerror] = useState(\"\");   \r\n    const[loginMsg] = useState(localStorage.getItem(\"loginMsg\"));//this sets logout msg if any\r\n    const[success,setsuccess] = useState(\"\")\r\n\r\n    window.onload = function() {\r\n        localStorage.removeItem(\"loginMsg\")\r\n    }//this resets the state on refreshing\r\n\r\n  \r\n    useEffect(() => {\r\n        async function fetchData(){\r\n            const customer = (await axios.get(`http://localhost:8070/customer/profile/${id}`,{withCredentials: true})).data;\r\n            setfirstName(customer.fname);\r\n            setlastName(customer.lname); \r\n            setemail(customer.email); \r\n            setaddress(customer.address);  \r\n            setphone(\"0\"+customer.pNo);    \r\n        }\r\n        fetchData();\r\n    },[id])\r\n  \r\n    const personalInfoForm = () => {\r\n        const inputFields = document.querySelectorAll(\"input[type='text']\");\r\n        for(let field = 0 ; field < inputFields.length ; field++){\r\n            inputFields[field].removeAttribute('disabled');\r\n        }\r\n        document.getElementById('updateButton').removeAttribute('hidden');\r\n        document.getElementById('cancelButton').removeAttribute('hidden');\r\n        document.getElementById('resetButton').setAttribute('hidden', 'true');\r\n        document.getElementById('editButton').setAttribute('hidden','true');\r\n        \r\n    }\r\n\r\n    const editData = async(e) => {\r\n        e.preventDefault();\r\n        setemailerror('');\r\n        seterrors([]);\r\n        const response = await axios.post(`http://localhost:8070/customer/profile/update/${id}`,{fname,lname,address,pNo},{withCredentials: true});\r\n        if (response.data.success) {\r\n            const inputFields = document.querySelectorAll(\"input[type='text']\");\r\n            for(let field = 0 ; field < inputFields.length ; field++){\r\n                inputFields[field].setAttribute('disabled','true');\r\n            }\r\n            document.getElementById('updateButton').setAttribute('hidden','true');\r\n            document.getElementById('cancelButton').setAttribute('hidden','true');\r\n            document.getElementById('resetButton').removeAttribute('hidden');\r\n            document.getElementById('editButton').removeAttribute('hidden');\r\n            setsuccess('You have successfully updated your profile!');\r\n            props.history.push(\"/customer/profile\");\r\n        }\r\n        if (response.data.errors) {\r\n            seterrors(response.data.errors);\r\n        }\r\n        if(response.data.emailerror){\r\n            setemailerror(response.data.emailerror);\r\n        } \r\n    }\r\n    const cancelUpdate = () => {\r\n            window.location = '/customer/profile'\r\n    }\r\n\r\n    const resetButton = () => {\r\n        props.history.push(\"/customer/profile/password-reset\");\r\n    }\r\n    const logoutHandler = () => {\r\n        if(window.confirm(\"Do you want to logout?\")){\r\n            removeUser();\r\n            localStorage.setItem('logoutMsg', 'You have successfully logged out!');\r\n            window.location = '/customer/login'\r\n        }\r\n    }\r\n    return (\r\n            <form className=\"form-group it19184722-myForm\">\r\n                <h2>User Profile</h2>\r\n                <button className=\"btn-danger btn it19184722-red-btn\" id=\"it19184722-logout-btn\" onClick={logoutHandler}>Log out</button>\r\n                {errors ? errors.map((error) => {\r\n                    return (\r\n                        <div class=\"alert alert-danger\" role=\"alert\">\r\n                            {error.msg}\r\n                      </div>\r\n                    )\r\n                }):null}\r\n                {emailerror ? \r\n                <div class=\"alert alert-danger\" role=\"alert\">\r\n                    {emailerror}\r\n                </div>: null}\r\n                {loginMsg ? \r\n                <div class=\"alert alert-success\" role=\"alert\">\r\n                {loginMsg}\r\n                </div> : null}\r\n                {success ? \r\n                <div class=\"alert alert-success\" role=\"alert\">\r\n                    {success}\r\n                </div>: null}\r\n                <label>First Name</label>\r\n                <input className=\"form-control\" type=\"text\" onChange={(e) => setfirstName(e.target.value)} value={fname} disabled/><br/>  \r\n\r\n                <label>Last Name</label>\r\n                <input className=\"form-control\" type=\"text\" onChange={(e) => setlastName(e.target.value)} value={lname} disabled/><br/>     \r\n\r\n                <label>Email</label>\r\n                <input className=\"form-control\" type=\"email\" value={email} disabled/><br/>\r\n\r\n                <label>Address</label>\r\n                <input className=\"form-control\" type=\"text\" onChange={(e) => setaddress(e.target.value)} value={address} disabled/><br/> \r\n\r\n                <label>Phone No</label>\r\n                <input className=\"form-control\" type=\"text\" onChange={(e) => setphone(e.target.value)} value={pNo} disabled/><br/> \r\n\r\n                <div className=\"it19184722-btn-section\">\r\n                    <input id=\"editButton\" type=\"button\" value=\"Edit Details\" onClick={personalInfoForm} className=\"it19184722-green-btn btn\" style={{marginRight:'5px'}}/>\r\n                    <input id=\"resetButton\" type=\"button\" value=\"Reset Password\" onClick={resetButton} className=\"it19184722-trans-green-btn btn\"/>\r\n                    <input id=\"updateButton\" type=\"button\" value=\"Update\" onClick={editData} className=\"it19184722-green-btn btn\" style={{marginRight:'5px'}} hidden/>\r\n                    <input id=\"cancelButton\" type=\"button\" value=\"Cancel\" onClick={cancelUpdate} className=\"btn-danger btn it19184722-red-btn\" hidden/>\r\n                </div>\r\n            </form>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}