{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Yassa\\\\Desktop\\\\8-20 clone\\\\SPM FLICKPLIX\\\\FlickPlix\\\\frontend\\\\src\\\\pages\\\\movie\\\\movie.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport img from '../../images/movie.jpg';\nimport img2 from '../../images/prof.jpg';\nimport './movie.css';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport AddBoxIcon from '@material-ui/icons/AddBox';\nimport Aos from 'aos';\nimport \"aos/dist/aos.css\";\nimport Comments from '../../components/CommentSection/comments';\nimport ReactPlayer from 'react-player';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport Loading from '../../components/mainpages/utils/loading/Loading';\nimport { useParams } from \"react-router\";\nimport Dropdown from 'react-bootstrap/Dropdown';\nimport DropdownMenu from '../../pages/favorites/dropdown';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Movie = ({}) => {\n  _s();\n\n  const desc = useRef();\n  const id = useParams().id;\n  const [title, setTitle] = useState(\"\");\n  const [year, setYear] = useState(\"\");\n  const [genre, setGenre] = useState(\"\");\n  const [description, setDesc] = useState(\"\");\n  const [trailer, setTrailer] = useState(\"\");\n  const [video, setVideo] = useState(\"\");\n  const [image, setImage] = useState(\"\");\n  let [plist, setPlaylist] = useState([]);\n  const [like, setlike] = useState();\n  const [isliked, setisLiked] = useState(false);\n  useEffect(() => {\n    Aos.init({\n      duration: 2000\n    });\n  }, []);\n  useEffect(() => {\n    async function fetchData() {\n      const response = (await axios.get(`http://localhost:8070/api/movies/find/${id}`)).data;\n      setTitle(response.title);\n      setYear(response.year);\n      setGenre(response.genre);\n      setDesc(response.desc);\n      setTrailer(response.trailer);\n      setVideo(response.video);\n      setImage(response.img);\n      setlike(response.likes.length);\n    }\n\n    fetchData();\n  }, [id]);\n\n  const submitFavsHandler = async e => {\n    e.preventDefault();\n    let newF;\n    const newFavorite = {\n      movieId: id,\n      title: title,\n      img: image,\n      year: year,\n      genre: genre //movieId:'6145eb2e19467e39980d27e7',\n\n    };\n\n    try {\n      newF = await axios.post(\"http://localhost:8070/api/favorites/addto\", newFavorite);\n\n      if (newF) {\n        window.alert(\"Movie has been added to favorites\");\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const submitHandler = async e => {\n    e.preventDefault();\n    let newc;\n    const newComment = {\n      userId: '611b74dd16f8353848675308',\n      uname: 'Liam Livingstone',\n      movieId: id,\n      //movieId:'6145eb2e19467e39980d27e7',\n      desc: desc.current.value\n    };\n\n    try {\n      newc = await axios.post(\"http://localhost:8070/api/comments\", newComment);\n\n      if (newc) {\n        window.alert(\"Comment has been posted\");\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const [allComments, setAllComments] = useState([]);\n  useEffect(() => {\n    const getComments = () => {\n      axios.get(`http://localhost:8070/api/comments/movie/${id}`).then(res => {\n        setAllComments(res.data);\n      });\n    };\n\n    getComments();\n  }, []);\n\n  const CommentList = () => {\n    return allComments.map(comment => {\n      return /*#__PURE__*/_jsxDEV(Comments, {\n        id: comment._id,\n        userid: comment.userId,\n        author: comment.uname,\n        desc: comment.desc\n      }, comment.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }, this);\n    });\n  };\n\n  useEffect(() => {\n    const getPlayLists = () => {\n      axios.get('http://localhost:8070/api/playlists').then(res => {\n        setPlaylist(res.data);\n      });\n    };\n\n    getPlayLists();\n  }, []);\n\n  const PlaylistAll = () => {\n    return plist.map(pName => {\n      return /*#__PURE__*/_jsxDEV(DropdownMenu, {\n        id: pName._id,\n        name: pName.name,\n        desc: pName.desc,\n        title: title,\n        year: year,\n        img: image,\n        movieId: id,\n        genre: genre\n      }, pName.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 11\n      }, this);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"MovieContainer\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"MovieWrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"MovieRow\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"Column1\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ImgWrap\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                \"data-aos\": \"fade-right\",\n                className: \"Img\",\n                src: image,\n                alt: \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 190,\n                columnNumber: 31\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 30\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 22\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"Column2\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"TextWrapper\",\n              children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"Heading\",\n                children: title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 34\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"Year\",\n                children: year\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 34\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"Genre\",\n                children: genre\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 206,\n                columnNumber: 34\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"icons\",\n                children: [/*#__PURE__*/_jsxDEV(FavoriteIcon, {\n                  className: \"fi\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 213,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"likesCount\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(AddBoxIcon, {\n                  className: \"bi\",\n                  onClick: submitFavsHandler\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 215,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"likesCount\",\n                  children: \"Add to Favorites\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 216,\n                  columnNumber: 38\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 34\n              }, this), /*#__PURE__*/_jsxDEV(Dropdown, {\n                children: [/*#__PURE__*/_jsxDEV(Dropdown.Toggle, {\n                  variant: \"success\",\n                  id: \"dropdown-basic\",\n                  children: \"Add to a PlayList\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 220,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Dropdown.Menu, {\n                  children: /*#__PURE__*/_jsxDEV(PlaylistAll, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 225,\n                    columnNumber: 47\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 224,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 219,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: `/watch/${id}`,\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"tbutton\",\n                  children: \"Watch Now\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 230,\n                  columnNumber: 34\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 34\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 34\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 30\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 27\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"Column3\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"Syno\",\n              children: \"Synopsis\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 27\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"Description\",\n              children: description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 27\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 27\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 22\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"commentcontainer\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"commenttrailerWrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"commentRow\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"commentSection\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"commenttitle\",\n              children: \"Comments\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 22\n            }, this), allComments.length === 0 && /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 51\n            }, this), /*#__PURE__*/_jsxDEV(CommentList, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 14\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"comments\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"commentwrapper\",\n                  children: /*#__PURE__*/_jsxDEV(\"form\", {\n                    className: \"commenting\",\n                    onSubmit: submitHandler,\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      placeholder: \"Leave a comment here...\",\n                      type: \"text\",\n                      required: true,\n                      className: \"commentinput\",\n                      ref: desc\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 281,\n                      columnNumber: 21\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"commentbutton\",\n                      type: \"submit\",\n                      children: \"Send\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 288,\n                      columnNumber: 21\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 280,\n                    columnNumber: 20\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 274,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 273,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 22\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"trailer\",\n            children: /*#__PURE__*/_jsxDEV(ReactPlayer, {\n              className: \"player\",\n              width: \"440px\",\n              height: \"240px\",\n              controls: true,\n              url: trailer\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 26\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 22\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 182,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Movie, \"PFQq+Scp+VS87mvoP7XXginzTLE=\", false, function () {\n  return [useParams];\n});\n\n_c = Movie;\nexport default Movie;\n\nvar _c;\n\n$RefreshReg$(_c, \"Movie\");","map":{"version":3,"sources":["C:/Users/Yassa/Desktop/8-20 clone/SPM FLICKPLIX/FlickPlix/frontend/src/pages/movie/movie.js"],"names":["React","useEffect","useRef","useState","img","img2","FavoriteIcon","AddBoxIcon","Aos","Comments","ReactPlayer","Link","axios","Loading","useParams","Dropdown","DropdownMenu","Movie","desc","id","title","setTitle","year","setYear","genre","setGenre","description","setDesc","trailer","setTrailer","video","setVideo","image","setImage","plist","setPlaylist","like","setlike","isliked","setisLiked","init","duration","fetchData","response","get","data","likes","length","submitFavsHandler","e","preventDefault","newF","newFavorite","movieId","post","window","alert","err","console","log","submitHandler","newc","newComment","userId","uname","current","value","allComments","setAllComments","getComments","then","res","CommentList","map","comment","_id","getPlayLists","PlaylistAll","pName","name"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState} from 'react';\r\nimport img from '../../images/movie.jpg';\r\nimport img2 from '../../images/prof.jpg';\r\nimport './movie.css';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport AddBoxIcon from '@material-ui/icons/AddBox';\r\nimport Aos from 'aos';\r\nimport \"aos/dist/aos.css\";\r\nimport Comments from '../../components/CommentSection/comments';\r\nimport ReactPlayer from 'react-player';\r\nimport {Link} from 'react-router-dom';\r\nimport axios from 'axios'; \r\nimport Loading from '../../components/mainpages/utils/loading/Loading';\r\nimport { useParams} from \"react-router\";\r\nimport Dropdown from 'react-bootstrap/Dropdown'\r\nimport DropdownMenu from '../../pages/favorites/dropdown';\r\n\r\n\r\n\r\n\r\nconst Movie = ({}) =>{\r\n  \r\n   const desc = useRef();\r\n   const id = useParams().id;\r\n   const [title, setTitle] = useState(\"\");\r\n   const [year, setYear] = useState(\"\");\r\n   const [genre,setGenre] = useState(\"\");\r\n   const [description, setDesc] = useState(\"\");\r\n   const [trailer, setTrailer] = useState(\"\");\r\n   const [video, setVideo] = useState(\"\");\r\n   const [image,setImage] = useState(\"\");\r\n   let [plist, setPlaylist] = useState([]);\r\n   const [like,setlike] = useState();\r\n   const [isliked,setisLiked] = useState(false);\r\n\r\n       useEffect(()=>{\r\n        Aos.init({duration: 2000 });\r\n    },[])\r\n   \r\n    useEffect(() => {\r\n        async function fetchData() {\r\n            const response = (await axios.get(`http://localhost:8070/api/movies/find/${id}`)).data;\r\n            setTitle(response.title);\r\n            setYear(response.year);\r\n            setGenre(response.genre);\r\n            setDesc(response.desc);\r\n            setTrailer(response.trailer);\r\n            setVideo(response.video);\r\n            setImage(response.img);\r\n            setlike(response.likes.length)\r\n        \r\n        }\r\n        fetchData();\r\n    }, [id])\r\n\r\n    \r\n   const submitFavsHandler = async (e)=>{\r\n       e.preventDefault()\r\n       let newF;\r\n\r\n       const newFavorite = {\r\n           \r\n           movieId: id,\r\n           title: title,\r\n           img: image,\r\n           year: year,\r\n           genre: genre\r\n           //movieId:'6145eb2e19467e39980d27e7',\r\n        \r\n       }\r\n\r\n       try{\r\n           newF = await axios.post(\"http://localhost:8070/api/favorites/addto\",newFavorite)\r\n           if(newF){\r\n               window.alert(\"Movie has been added to favorites\")\r\n           }\r\n       }catch(err){\r\n           console.log(err)\r\n       }\r\n   }\r\n\r\n\r\n\r\n   const submitHandler = async (e)=>{\r\n       e.preventDefault()\r\n       let newc;\r\n\r\n       const newComment = {\r\n           userId: '611b74dd16f8353848675308',\r\n           uname:'Liam Livingstone',\r\n           movieId: id,\r\n           //movieId:'6145eb2e19467e39980d27e7',\r\n           desc: desc.current.value,\r\n       }\r\n\r\n       try{\r\n           newc = await axios.post(\"http://localhost:8070/api/comments\",newComment)\r\n           if(newc){\r\n               window.alert(\"Comment has been posted\")\r\n           }\r\n       }catch(err){\r\n           console.log(err)\r\n       }\r\n   }\r\n\r\n\r\n\r\n    const [allComments,setAllComments] = useState([]);\r\n\r\n    useEffect(()=>{\r\n\r\n        const getComments = () =>{\r\n        axios.get(`http://localhost:8070/api/comments/movie/${id}`).then((res)=>{\r\n            setAllComments(res.data);\r\n        })\r\n    }\r\n       getComments();\r\n    },[])\r\n\r\n\r\n    const CommentList = ()=>{\r\n        return allComments.map((comment)=>{\r\n\r\n            return(\r\n                <Comments\r\n                   key={comment.id}\r\n                   id={comment._id}\r\n                   userid = {comment.userId}\r\n                   author={comment.uname}\r\n                   desc={comment.desc}/>\r\n\r\n              \r\n            )\r\n            \r\n        })\r\n        \r\n    }\r\n    \r\n\r\n\r\n    useEffect(()=>{\r\n\r\n      const getPlayLists = () =>{\r\n        axios.get('http://localhost:8070/api/playlists').then((res)=>{\r\n          setPlaylist(res.data);\r\n        })\r\n      }\r\n\r\n      getPlayLists();\r\n    },[])\r\n\r\n    const PlaylistAll = ()=>{\r\n      return plist.map((pName)=>{\r\n\r\n        return(\r\n          <DropdownMenu\r\n               key = {pName.id}\r\n               id  =   {pName._id}\r\n               name = {pName.name}\r\n               desc = {pName.desc} \r\n               title = {title}\r\n               year = {year}\r\n               img = {image}\r\n               movieId ={id}  \r\n               genre = {genre}\r\n               />\r\n        )\r\n      })\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    return (\r\n\r\n\r\n        <div>\r\n            <div className=\"MovieContainer\">\r\n\r\n                <div className=\"MovieWrapper\">\r\n                     <div className=\"MovieRow\">\r\n                     <div className=\"Column1\">\r\n                             <div className=\"ImgWrap\">\r\n\r\n                              <img data-aos=\"fade-right\" className=\"Img\" src={image} alt=''/>\r\n                            \r\n                            \r\n                             </div>\r\n                          \r\n                          \r\n                          </div>\r\n                          <div className=\"Column2\">\r\n                             <div className=\"TextWrapper\">\r\n\r\n                                 <h1 className=\"Heading\">\r\n                                  {title}\r\n\r\n                                 </h1>\r\n\r\n                                 <p className=\"Year\">{year}</p>\r\n                                 <p className=\"Genre\">\r\n                                    {genre}\r\n                                 </p>\r\n\r\n                               \r\n\r\n                                 <div className=\"icons\">\r\n                                    <FavoriteIcon className=\"fi\"/>\r\n                                    <p className=\"likesCount\">{}</p>\r\n                                    <AddBoxIcon className=\"bi\" onClick={submitFavsHandler}/>\r\n                                     <p className=\"likesCount\">Add to Favorites</p>\r\n                                 </div>\r\n\r\n                                    <Dropdown>\r\n                                    <Dropdown.Toggle variant=\"success\" id=\"dropdown-basic\">\r\n                                    Add to a PlayList\r\n                                          </Dropdown.Toggle>\r\n  \r\n                                            <Dropdown.Menu>\r\n                                              <PlaylistAll/>\r\n                                                </Dropdown.Menu>\r\n                                    </Dropdown>\r\n\r\n                                 <Link to={`/watch/${id}`}>\r\n                                 <button className=\"tbutton\">Watch Now</button></Link>\r\n                                 <div>\r\n                          {/*     <img className=\"profileuserimg\"\r\n                                  src={img2}\r\n    alt=''/>*/}\r\n                         </div>\r\n                               \r\n                             </div>\r\n                            \r\n                          \r\n                          \r\n                          </div>\r\n\r\n                          <div className=\"Column3\">\r\n                          <p className=\"Syno\">\r\n                                     Synopsis\r\n                                 </p>\r\n                          <p className=\"Description\">\r\n                            \r\n                                  {description}\r\n                          </p>\r\n                        \r\n\r\n                          </div>\r\n\r\n                         \r\n                      </div>\r\n                   </div>\r\n                </div>\r\n\r\n                <div className=\"commentcontainer\">\r\n                <div className=\"commenttrailerWrapper\">\r\n                     <div className=\"commentRow\">\r\n                     <div className=\"commentSection\">\r\n                     <h1 className=\"commenttitle\">Comments</h1>\r\n\r\n                     {allComments.length === 0 && <Loading />}\r\n             <CommentList/>\r\n\r\n             \r\n\r\n                <div>\r\n\r\n                <div className=\"comments\">\r\n                <div className=\"commentwrapper\">\r\n\r\n\r\n\r\n                   \r\n\r\n                   <form className=\"commenting\" onSubmit={submitHandler}>\r\n                    <input placeholder=\"Leave a comment here...\"\r\n                           type=\"text\"\r\n                           required\r\n                           className=\"commentinput\"\r\n                           ref={desc}    \r\n                           />\r\n                       \r\n                    <button className=\"commentbutton\" type=\"submit\">Send</button>\r\n                    </form>\r\n\r\n\r\n\r\n\r\n\r\n                </div>\r\n           \r\n                </div>\r\n                </div>\r\n                      </div>\r\n\r\n                    <div className=\"trailer\">\r\n                         <ReactPlayer className=\"player\"\r\n                            width=\"440px\"\r\n                            height=\"240px\"\r\n                            controls\r\n                            url={trailer}/>\r\n</div>\r\n\r\n            </div>\r\n       \r\n           \r\n            </div>\r\n</div>\r\n\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Movie\r\n"]},"metadata":{},"sourceType":"module"}