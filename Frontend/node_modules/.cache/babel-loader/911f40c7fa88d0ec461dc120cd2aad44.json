{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Yassa\\\\Desktop\\\\8-20 clone\\\\SPM FLICKPLIX\\\\FlickPlix\\\\frontend\\\\src\\\\pages\\\\adminpages\\\\newMovie\\\\NewMovie.jsx\",\n    _s = $RefreshSig$();\n\nimport { useContext, useState } from \"react\";\nimport \"./newMovie.css\";\nimport storage from '../../../firebase';\nimport { createMovie } from \"../../../context/movieContext/apiCalls\";\nimport { MovieContext } from \"../../../context/movieContext/MovieContext\";\nimport { useHistory } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function NewMovie() {\n  _s();\n\n  const [movie, setMovie] = useState(null);\n  const [img, setImg] = useState(null);\n  const [imgTitle, setImgTitle] = useState(null);\n  const [imgSm, setImgSm] = useState(null);\n  const [trailer, setTrailer] = useState(null);\n  const [video, setVideo] = useState(null);\n  const [uploaded, setUploaded] = useState(0);\n  const {\n    dispatch\n  } = useContext(MovieContext);\n  const history = useHistory();\n\n  const handleChange = e => {\n    const value = e.target.value;\n    setMovie({ ...movie,\n      [e.target.name]: value\n    });\n  };\n\n  const upload = items => {\n    items.forEach(item => {\n      const fileName = new Date().getTime() + item.label + item.file.name;\n      const uploadTask = storage.ref(`/items/${fileName}`).put(item.file);\n      uploadTask.on(\"state_changed\", snapshot => {\n        const progress = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n        console.log(\"Upload is \" + progress + \"% done\");\n      }, error => {\n        console.log(error);\n      }, () => {\n        uploadTask.snapshot.ref.getDownloadURL().then(url => {\n          setMovie(prev => {\n            return { ...prev,\n              [item.label]: url\n            };\n          });\n          setUploaded(prev => prev + 1);\n        });\n      });\n    });\n  };\n\n  const handleUpload = e => {\n    e.preventDefault();\n    upload([{\n      file: img,\n      label: \"img\"\n    }, {\n      file: imgTitle,\n      label: \"imgTitle\"\n    }, {\n      file: imgSm,\n      label: \"imgSm\"\n    }, {\n      file: trailer,\n      label: \"trailer\"\n    }, {\n      file: video,\n      label: \"video\"\n    }]);\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    createMovie(movie, dispatch);\n    history.push(\"/admin/movies\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"newProduct\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"addProductTitle\",\n      children: \"New Movie\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"addProductForm\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          id: \"img\",\n          name: \"img\",\n          onChange: e => setImg(e.target.files[0])\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Title image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          id: \"imgTitle\",\n          name: \"imgTitle\",\n          onChange: e => setImgTitle(e.target.files[0])\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Thumbnail image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          id: \"imgSm\",\n          name: \"imgSm\",\n          onChange: e => setImgSm(e.target.files[0])\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Title\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"John Wick\",\n          name: \"title\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"description\",\n          name: \"desc\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Year\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Year\",\n          name: \"year\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Genre\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Genre\",\n          name: \"genre\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Duration\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Duration\",\n          name: \"duration\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Limit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"limit\",\n          name: \"limit\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Is Series?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"isSeries\",\n          id: \"isSeries\",\n          onChange: handleChange,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"false\",\n            children: \"No\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"true\",\n            children: \"Yes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Trailer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          name: \"trailer\",\n          onChange: e => setTrailer(e.target.files[0])\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addProductItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Video\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          name: \"video\",\n          onChange: e => setVideo(e.target.files[0])\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this), uploaded === 5 ? /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"addProductButton\",\n        onClick: handleSubmit,\n        children: \"Create\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"addProductButton\",\n        onClick: handleUpload,\n        children: \"Upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n}\n\n_s(NewMovie, \"giAUjCl/V+EFZ8PNJZ1iCr6VHrM=\", false, function () {\n  return [useHistory];\n});\n\n_c = NewMovie;\n\nvar _c;\n\n$RefreshReg$(_c, \"NewMovie\");","map":{"version":3,"sources":["C:/Users/Yassa/Desktop/8-20 clone/SPM FLICKPLIX/FlickPlix/frontend/src/pages/adminpages/newMovie/NewMovie.jsx"],"names":["useContext","useState","storage","createMovie","MovieContext","useHistory","NewMovie","movie","setMovie","img","setImg","imgTitle","setImgTitle","imgSm","setImgSm","trailer","setTrailer","video","setVideo","uploaded","setUploaded","dispatch","history","handleChange","e","value","target","name","upload","items","forEach","item","fileName","Date","getTime","label","file","uploadTask","ref","put","on","snapshot","progress","bytesTransferred","totalBytes","console","log","error","getDownloadURL","then","url","prev","handleUpload","preventDefault","handleSubmit","push","files"],"mappings":";;;AAAA,SAASA,UAAT,EAAqBC,QAArB,QAAqC,OAArC;AACA,OAAO,gBAAP;AACA,OAAOC,OAAP,MAAoB,mBAApB;AACA,SAASC,WAAT,QAA4B,wCAA5B;AACA,SAASC,YAAT,QAA6B,4CAA7B;AACA,SAASC,UAAT,QAA2B,kBAA3B;;AAEA,eAAe,SAASC,QAAT,GAAoB;AAAA;;AACjC,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBP,QAAQ,CAAC,IAAD,CAAlC;AACA,QAAM,CAACQ,GAAD,EAAMC,MAAN,IAAgBT,QAAQ,CAAC,IAAD,CAA9B;AACA,QAAM,CAACU,QAAD,EAAWC,WAAX,IAA0BX,QAAQ,CAAC,IAAD,CAAxC;AACA,QAAM,CAACY,KAAD,EAAQC,QAAR,IAAoBb,QAAQ,CAAC,IAAD,CAAlC;AACA,QAAM,CAACc,OAAD,EAAUC,UAAV,IAAwBf,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAM,CAACgB,KAAD,EAAQC,QAAR,IAAoBjB,QAAQ,CAAC,IAAD,CAAlC;AACA,QAAM,CAACkB,QAAD,EAAWC,WAAX,IAA0BnB,QAAQ,CAAC,CAAD,CAAxC;AAEA,QAAM;AAAEoB,IAAAA;AAAF,MAAerB,UAAU,CAACI,YAAD,CAA/B;AACA,QAAMkB,OAAO,GAAGjB,UAAU,EAA1B;;AAEA,QAAMkB,YAAY,GAAIC,CAAD,IAAO;AAC1B,UAAMC,KAAK,GAAGD,CAAC,CAACE,MAAF,CAASD,KAAvB;AACAjB,IAAAA,QAAQ,CAAC,EAAE,GAAGD,KAAL;AAAY,OAACiB,CAAC,CAACE,MAAF,CAASC,IAAV,GAAiBF;AAA7B,KAAD,CAAR;AACD,GAHD;;AAKA,QAAMG,MAAM,GAAIC,KAAD,IAAW;AACxBA,IAAAA,KAAK,CAACC,OAAN,CAAeC,IAAD,IAAU;AACtB,YAAMC,QAAQ,GAAG,IAAIC,IAAJ,GAAWC,OAAX,KAAuBH,IAAI,CAACI,KAA5B,GAAoCJ,IAAI,CAACK,IAAL,CAAUT,IAA/D;AACA,YAAMU,UAAU,GAAGnC,OAAO,CAACoC,GAAR,CAAa,UAASN,QAAS,EAA/B,EAAkCO,GAAlC,CAAsCR,IAAI,CAACK,IAA3C,CAAnB;AACAC,MAAAA,UAAU,CAACG,EAAX,CACE,eADF,EAEGC,QAAD,IAAc;AACZ,cAAMC,QAAQ,GACXD,QAAQ,CAACE,gBAAT,GAA4BF,QAAQ,CAACG,UAAtC,GAAoD,GADtD;AAEAC,QAAAA,OAAO,CAACC,GAAR,CAAY,eAAeJ,QAAf,GAA0B,QAAtC;AACD,OANH,EAOGK,KAAD,IAAW;AACTF,QAAAA,OAAO,CAACC,GAAR,CAAYC,KAAZ;AACD,OATH,EAUE,MAAM;AACJV,QAAAA,UAAU,CAACI,QAAX,CAAoBH,GAApB,CAAwBU,cAAxB,GAAyCC,IAAzC,CAA+CC,GAAD,IAAS;AACrD1C,UAAAA,QAAQ,CAAE2C,IAAD,IAAU;AACjB,mBAAO,EAAE,GAAGA,IAAL;AAAW,eAACpB,IAAI,CAACI,KAAN,GAAce;AAAzB,aAAP;AACD,WAFO,CAAR;AAGA9B,UAAAA,WAAW,CAAE+B,IAAD,IAAUA,IAAI,GAAG,CAAlB,CAAX;AACD,SALD;AAMD,OAjBH;AAmBD,KAtBD;AAuBD,GAxBD;;AA0BA,QAAMC,YAAY,GAAI5B,CAAD,IAAO;AAC1BA,IAAAA,CAAC,CAAC6B,cAAF;AACAzB,IAAAA,MAAM,CAAC,CACL;AAAEQ,MAAAA,IAAI,EAAE3B,GAAR;AAAa0B,MAAAA,KAAK,EAAE;AAApB,KADK,EAEL;AAAEC,MAAAA,IAAI,EAAEzB,QAAR;AAAkBwB,MAAAA,KAAK,EAAE;AAAzB,KAFK,EAGL;AAAEC,MAAAA,IAAI,EAAEvB,KAAR;AAAesB,MAAAA,KAAK,EAAE;AAAtB,KAHK,EAIL;AAAEC,MAAAA,IAAI,EAAErB,OAAR;AAAiBoB,MAAAA,KAAK,EAAE;AAAxB,KAJK,EAKL;AAAEC,MAAAA,IAAI,EAAEnB,KAAR;AAAekB,MAAAA,KAAK,EAAE;AAAtB,KALK,CAAD,CAAN;AAOD,GATD;;AAWA,QAAMmB,YAAY,GAAI9B,CAAD,IAAO;AAC1BA,IAAAA,CAAC,CAAC6B,cAAF;AACAlD,IAAAA,WAAW,CAACI,KAAD,EAAQc,QAAR,CAAX;AACAC,IAAAA,OAAO,CAACiC,IAAR,CAAa,eAAb;AACD,GAJD;;AAMA,sBACE;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA,4BACE;AAAI,MAAA,SAAS,EAAC,iBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AAAM,MAAA,SAAS,EAAC,gBAAhB;AAAA,8BACE;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA,gCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AACE,UAAA,IAAI,EAAC,MADP;AAEE,UAAA,EAAE,EAAC,KAFL;AAGE,UAAA,IAAI,EAAC,KAHP;AAIE,UAAA,QAAQ,EAAG/B,CAAD,IAAOd,MAAM,CAACc,CAAC,CAACE,MAAF,CAAS8B,KAAT,CAAe,CAAf,CAAD;AAJzB;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAUE;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA,gCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AACE,UAAA,IAAI,EAAC,MADP;AAEE,UAAA,EAAE,EAAC,UAFL;AAGE,UAAA,IAAI,EAAC,UAHP;AAIE,UAAA,QAAQ,EAAGhC,CAAD,IAAOZ,WAAW,CAACY,CAAC,CAACE,MAAF,CAAS8B,KAAT,CAAe,CAAf,CAAD;AAJ9B;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cAVF,eAmBE;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA,gCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AACE,UAAA,IAAI,EAAC,MADP;AAEE,UAAA,EAAE,EAAC,OAFL;AAGE,UAAA,IAAI,EAAC,OAHP;AAIE,UAAA,QAAQ,EAAGhC,CAAD,IAAOV,QAAQ,CAACU,CAAC,CAACE,MAAF,CAAS8B,KAAT,CAAe,CAAf,CAAD;AAJ3B;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cAnBF,eA4BE;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA,gCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AACE,UAAA,IAAI,EAAC,MADP;AAEE,UAAA,WAAW,EAAC,WAFd;AAGE,UAAA,IAAI,EAAC,OAHP;AAIE,UAAA,QAAQ,EAAEjC;AAJZ;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cA5BF,eAqCE;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA,gCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AACE,UAAA,IAAI,EAAC,MADP;AAEE,UAAA,WAAW,EAAC,aAFd;AAGE,UAAA,IAAI,EAAC,MAHP;AAIE,UAAA,QAAQ,EAAEA;AAJZ;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cArCF,eA8CE;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA,gCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AACE,UAAA,IAAI,EAAC,MADP;AAEE,UAAA,WAAW,EAAC,MAFd;AAGE,UAAA,IAAI,EAAC,MAHP;AAIE,UAAA,QAAQ,EAAEA;AAJZ;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cA9CF,eAuDE;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA,gCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AACE,UAAA,IAAI,EAAC,MADP;AAEE,UAAA,WAAW,EAAC,OAFd;AAGE,UAAA,IAAI,EAAC,OAHP;AAIE,UAAA,QAAQ,EAAEA;AAJZ;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cAvDF,eAgEE;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA,gCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AACE,UAAA,IAAI,EAAC,MADP;AAEE,UAAA,WAAW,EAAC,UAFd;AAGE,UAAA,IAAI,EAAC,UAHP;AAIE,UAAA,QAAQ,EAAEA;AAJZ;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cAhEF,eAyEE;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA,gCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AACE,UAAA,IAAI,EAAC,MADP;AAEE,UAAA,WAAW,EAAC,OAFd;AAGE,UAAA,IAAI,EAAC,OAHP;AAIE,UAAA,QAAQ,EAAEA;AAJZ;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cAzEF,eAkFE;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA,gCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAQ,UAAA,IAAI,EAAC,UAAb;AAAwB,UAAA,EAAE,EAAC,UAA3B;AAAsC,UAAA,QAAQ,EAAEA,YAAhD;AAAA,kCACE;AAAQ,YAAA,KAAK,EAAC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAQ,YAAA,KAAK,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cAlFF,eAyFE;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA,gCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AACE,UAAA,IAAI,EAAC,MADP;AAEE,UAAA,IAAI,EAAC,SAFP;AAGE,UAAA,QAAQ,EAAGC,CAAD,IAAOR,UAAU,CAACQ,CAAC,CAACE,MAAF,CAAS8B,KAAT,CAAe,CAAf,CAAD;AAH7B;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cAzFF,eAiGE;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA,gCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AACE,UAAA,IAAI,EAAC,MADP;AAEE,UAAA,IAAI,EAAC,OAFP;AAGE,UAAA,QAAQ,EAAGhC,CAAD,IAAON,QAAQ,CAACM,CAAC,CAACE,MAAF,CAAS8B,KAAT,CAAe,CAAf,CAAD;AAH3B;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cAjGF,EAyGGrC,QAAQ,KAAK,CAAb,gBACC;AAAQ,QAAA,SAAS,EAAC,kBAAlB;AAAqC,QAAA,OAAO,EAAEmC,YAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADD,gBAKC;AAAQ,QAAA,SAAS,EAAC,kBAAlB;AAAqC,QAAA,OAAO,EAAEF,YAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cA9GJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAwHD;;GApLuB9C,Q;UAUND,U;;;KAVMC,Q","sourcesContent":["import { useContext, useState } from \"react\";\r\nimport \"./newMovie.css\";\r\nimport storage from '../../../firebase';\r\nimport { createMovie } from \"../../../context/movieContext/apiCalls\";\r\nimport { MovieContext } from \"../../../context/movieContext/MovieContext\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport default function NewMovie() {\r\n  const [movie, setMovie] = useState(null);\r\n  const [img, setImg] = useState(null);\r\n  const [imgTitle, setImgTitle] = useState(null);\r\n  const [imgSm, setImgSm] = useState(null);\r\n  const [trailer, setTrailer] = useState(null);\r\n  const [video, setVideo] = useState(null);\r\n  const [uploaded, setUploaded] = useState(0);\r\n\r\n  const { dispatch } = useContext(MovieContext);\r\n  const history = useHistory();\r\n\r\n  const handleChange = (e) => {\r\n    const value = e.target.value;\r\n    setMovie({ ...movie, [e.target.name]: value });\r\n  };\r\n\r\n  const upload = (items) => {\r\n    items.forEach((item) => {\r\n      const fileName = new Date().getTime() + item.label + item.file.name;\r\n      const uploadTask = storage.ref(`/items/${fileName}`).put(item.file);\r\n      uploadTask.on(\r\n        \"state_changed\",\r\n        (snapshot) => {\r\n          const progress =\r\n            (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n          console.log(\"Upload is \" + progress + \"% done\");\r\n        },\r\n        (error) => {\r\n          console.log(error);\r\n        },\r\n        () => {\r\n          uploadTask.snapshot.ref.getDownloadURL().then((url) => {\r\n            setMovie((prev) => {\r\n              return { ...prev, [item.label]: url };\r\n            });\r\n            setUploaded((prev) => prev + 1);\r\n          });\r\n        }\r\n      );\r\n    });\r\n  };\r\n\r\n  const handleUpload = (e) => {\r\n    e.preventDefault();\r\n    upload([\r\n      { file: img, label: \"img\" },\r\n      { file: imgTitle, label: \"imgTitle\" },\r\n      { file: imgSm, label: \"imgSm\" },\r\n      { file: trailer, label: \"trailer\" },\r\n      { file: video, label: \"video\" },\r\n    ]);\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    createMovie(movie, dispatch);\r\n    history.push(\"/admin/movies\")\r\n  };\r\n\r\n  return (\r\n    <div className=\"newProduct\">\r\n      <h1 className=\"addProductTitle\">New Movie</h1>\r\n      <form className=\"addProductForm\">\r\n        <div className=\"addProductItem\">\r\n          <label>Image</label>\r\n          <input\r\n            type=\"file\"\r\n            id=\"img\"\r\n            name=\"img\"\r\n            onChange={(e) => setImg(e.target.files[0])}\r\n          />\r\n        </div>\r\n        <div className=\"addProductItem\">\r\n          <label>Title image</label>\r\n          <input\r\n            type=\"file\"\r\n            id=\"imgTitle\"\r\n            name=\"imgTitle\"\r\n            onChange={(e) => setImgTitle(e.target.files[0])}\r\n          />\r\n        </div>\r\n        <div className=\"addProductItem\">\r\n          <label>Thumbnail image</label>\r\n          <input\r\n            type=\"file\"\r\n            id=\"imgSm\"\r\n            name=\"imgSm\"\r\n            onChange={(e) => setImgSm(e.target.files[0])}\r\n          />\r\n        </div>\r\n        <div className=\"addProductItem\">\r\n          <label>Title</label>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"John Wick\"\r\n            name=\"title\"\r\n            onChange={handleChange}\r\n          />\r\n        </div>\r\n        <div className=\"addProductItem\">\r\n          <label>Description</label>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"description\"\r\n            name=\"desc\"\r\n            onChange={handleChange}\r\n          />\r\n        </div>\r\n        <div className=\"addProductItem\">\r\n          <label>Year</label>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Year\"\r\n            name=\"year\"\r\n            onChange={handleChange}\r\n          />\r\n        </div>\r\n        <div className=\"addProductItem\">\r\n          <label>Genre</label>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Genre\"\r\n            name=\"genre\"\r\n            onChange={handleChange}\r\n          />\r\n        </div>\r\n        <div className=\"addProductItem\">\r\n          <label>Duration</label>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Duration\"\r\n            name=\"duration\"\r\n            onChange={handleChange}\r\n          />\r\n        </div>\r\n        <div className=\"addProductItem\">\r\n          <label>Limit</label>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"limit\"\r\n            name=\"limit\"\r\n            onChange={handleChange}\r\n          />\r\n        </div>\r\n        <div className=\"addProductItem\">\r\n          <label>Is Series?</label>\r\n          <select name=\"isSeries\" id=\"isSeries\" onChange={handleChange}>\r\n            <option value=\"false\">No</option>\r\n            <option value=\"true\">Yes</option>\r\n          </select>\r\n        </div>\r\n        <div className=\"addProductItem\">\r\n          <label>Trailer</label>\r\n          <input\r\n            type=\"file\"\r\n            name=\"trailer\"\r\n            onChange={(e) => setTrailer(e.target.files[0])}\r\n          />\r\n        </div>\r\n        <div className=\"addProductItem\">\r\n          <label>Video</label>\r\n          <input\r\n            type=\"file\"\r\n            name=\"video\"\r\n            onChange={(e) => setVideo(e.target.files[0])}\r\n          />\r\n        </div>\r\n        {uploaded === 5 ? (\r\n          <button className=\"addProductButton\" onClick={handleSubmit}>\r\n            Create\r\n          </button>\r\n        ) : (\r\n          <button className=\"addProductButton\" onClick={handleUpload}>\r\n            Upload\r\n          </button>\r\n        )}\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}